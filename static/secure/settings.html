<!DOCTYPE html>
<!-- this is the most klugeyist of kludges, I need to brush up on angular and express -->
<html lang="en">
<head>
	<meta   name="viewport"   content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta   charset="UTF-8">
	<script   src="https://code.jquery.com/jquery-2.2.3.js"   integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4="   crossorigin="anonymous"></script>
	<link   rel="stylesheet"   href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"   integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <script   src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0-rc.1/angular.min.js"></script>
    <script   src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.1/moment.min.js"></script>
    <link   rel="stylesheet"   href="/style/oneRoof-style.css">
    <link   rel="stylesheet"   href="/style/normalize.css">
	<link   rel="stylesheet"   href="/style/style.css">
	<script src="js/settings.js"></script>
</head>
	
<body class="container" ng-app="settings" ng-controller="SettingController">
	<header class="page-header">
		<div class="row">
			<div class="col-md-6">
				<h1>Welcome Back, {{ displayName }}</h1>
			</div>
			<div class="col-md-1">
				<a href="settings.html" class="btn btn-primary">Settings</a>
			</div>
			<div class="col-md-1">
				<a href="/api/signout" class="btn btn-danger">Sign out!</a>
			</div>
		</div>
	</header>
	<div class="col-md-4">
		<h1>Personal Information</h1>

		<h3>email: {{ email }}</h3>
		<h3>username: {{ displayName }} </h3>

		<h2>Update Name</h2>
		<form ng-submit="updateName()">
			<div class="form-group">
			  	<label for="displayNameChange"></label>
			  	<input class="form-control" id="displayNameChange" placeholder="New display name" name="displayName" ng-model="changeDisplayName" required>
			</div>
			<input class="btn btn-info" type="submit">
		</form>

			<h2>Change Password</h2>
			<form ng-submit="updatePassword()">
				<div class="form-group">
					<label for="currPass">Current Password</label>
					<input class="form-control" id="currPass" placeholder="Current password" name="curPass" ng-model="curPass" required>
				</div>
					<div class="alert alert-danger" role="alert" ng-show="incorrectPass">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
				 		<span class="sr-only">Error:</span>
						Password is incorrect!
				</div>
				<div class="form-group">
					<label for="newPass">New Password</label>
					<input type="password" class="form-control" id="password" placeholder="New password" name="newPassword" ng-model="newPassword" required>
				</div>
				<div class="form-group">
					<label for="confirmNewPass">Confirm New Password</label>
					<input type="password" class="form-control" id="password" placeholder="Confirm new password" name="password" ng-model="confirmNewPassword" required>
				</div>
				<div class="alert alert-danger" role="alert" ng-show="confirmPass">
						<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
				 		<span class="sr-only">Error:</span>
						Passwords need to match!
				</div>
			  	<input class="btn btn-info" type="submit">
			</form>

			<h2>Upload Profile Pic</h2>
			<div>
				

			</div>

			<form action="/api/upload" method="POST" enctype="multipart/form-data">
			  Select an image to upload:
			  <input type="file" name="image"> 
			  <input type="submit" value="Upload Image">
			</form>	
</div>
	<div class="col-md-4">
		<h2>House Information</h2>

		<div class="row" ng-show="!house">

			<div class="col-md-6 col-sm-2" ng-hide="inHouse">
				<form ng-submit="createHouse()">
					<div class="form-group">
			  			<label for="createNewHouse"></label>
			  			<input class="form-control" id="createNewHouse" placeholder="House Name" name="setHouseName" ng-model="createNewHouse" required>
					</div>
					<input class="btn btn-info" type="submit">
				</form>
			</div>

			<div class="col-md-6 col-sm-2" ng-hide="inHouse">
				<form ng-submit="joinHouse()">
					<div class="form-group">
			  			<label for="joinAHouse"></label>
			  			<input class="form-control" id="joinAHouse" placeholder="House Code" name="enterHouseCode" ng-model="joinAHouse" required>
					</div>
					<input class="btn btn-info" type="submit">
				</form>
		</div>
		<div class="row" ng-show="!house">
			<div class="col-md-6">
			<p>Your House Name: {{ houseNAME }}</p>
			<p>Your House Code: {{ houseCODE }}</p>
			<a class="btn btn-danger" ng-click="leaveHouse()">LEAVE HOUSE</a></div>
		</div>
		<div ng-hide="">
		<h3>Manage Responsibility Groups</h3>
		<div class="row">
			<div class="col-md-6">
				<form ng-submit="createGroup()">
					<input class="form-control" ng-model="groupName" placeholder="Group Name" name="groupName" required>
					<input class="form-control" ng-model="groupDescr" placeholder="Write a bit about what this group does or is!" name="groupDescr" required>
					<button class="btn btn-primary">CREATE GROUP</button>
				</form>
			</div>
			<div class="col-md-6">
				<form>
					<!--Need to create get house groups-->
					<select ng-model="joinIntoGroup" class="form-control" ng-options="item.group_name for item in groups" required>
	    					<option value="">Select A Responsibility Group</option>
					</select>
					<button class="btn btn-success" ng-click="joinGroup()">JOIN GROUP</button>
				</form>
			</div>			
		</div>
			
			<h2>Responsibility Groups</h2>
			<!--Smoke and Mirrors time-->
			<ul>
				<div ng-show="houseJoined">
				<li><button ng-click="selectDefaultG()" class="btn btn-secondary">Kitchen Crew</button></li></div>
				<div ng-show="groupJoined">
					<li><button ng-click="selectOtherG()" class="btn btn-secondary">Downstairs Roommates</button></li>
				</div>
				<div ng-show="groupCreated">
				<li><button ng-click="selectCreateG()" class="btn btn-secondary">New Group Name</button></li>
				</div>
			</ul>
		</div>
	</div>
		<div class="col-md-4">
		<li ng-repeat="u in houseUsers">
			<!-- Make this link to profiles where you pass in a user object to be displayed -->
			<form>
				<a href="/profile.html" ng-click="loadProf(u.email)"><p>{{ u.displayName }}</p>
				<p ng-model="loadedEmail">{{ u.email }}</p></a>
			</form>
		</li>

		
		</div>
	</div>
</body>

</html>
<!--